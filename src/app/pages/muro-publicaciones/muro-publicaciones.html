<app-hero></app-hero>
<!-- Barra de Filtrado -->
<div class="card flex flex-col md:flex-row py-3 px-6 mb-8 justify-around items-center gap-2 max-w-4xl mx-auto">
  <div class="flex gap-2 align-center">
    <p class="pt-1.5 text-sm font-semibold">Tipo de Mascota:</p>
    <div class="buttons flex justify-between align-center gap-1">
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoMascota() === 'gato'
        }"
        (click)="toggleTipoMascota('gato')"
      >
        Gato
      </button>
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoMascota() === 'perro'
        }"
        (click)="toggleTipoMascota('perro')"
      >
        Perro
      </button>
    </div>
  </div>

  <div class="flex gap-2 align-center">
    <p class="pt-1.5 text-sm font-semibold">Estado:</p>
    <div class="buttons flex justify-between align-center gap-1">
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroEstadoMascota() === 'perdido'
        }"
        (click)="toggleEstadoMascota('perdido')"
      >
        Perdido
      </button>
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroEstadoMascota() === 'encontrado'
        }"
        (click)="toggleEstadoMascota('encontrado')"
      >
        Encontrado
      </button>
    </div>
  </div>

  <div class="w-0.5 h-6 bg-border hidden md:block"></div>

  <div class="flex gap-2 align-center">
    <p class="pt-1.5 text-sm font-semibold">Vista:</p>
    <div class="buttons flex justify-between align-center gap-1">
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoVista() === 'grilla'
        }"
        (click)="toggleTipoVista('grilla')"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-grid2x2-icon lucide-grid-2x2"
        >
          <path d="M12 3v18" />
          <path d="M3 12h18" />
          <rect x="3" y="3" width="18" height="18" rx="2" />
        </svg>
      </button>
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoVista() === 'mapa'
        }"
        (click)="toggleTipoVista('mapa')"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-map-pinned-icon lucide-map-pinned"
        >
          <path
            d="M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0"
          />
          <circle cx="12" cy="8" r="2" />
          <path
            d="M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712"
          />
        </svg>
      </button>
    </div>
  </div>
</div>

@if(filtroTipoVista() === 'mapa'){
<div class="max-w-4xl mx-auto">
  <app-map [publicaciones]="publicacionesFiltradas()"></app-map>
</div>
}@else(){
<!-- El signo | es un pipe para transformar como se muestran los datos de la izquierda, en este caso para paginarlos. -->
<!-- De todas las publicaciones, lo pagino pasandole los valores que yo quiero al paginate (Paginate = transformador especifico de ngxPagination) y le pongo un id- -->

<app-publicacion-list
  [publicaciones]="
    publicacionesFiltradas()
      | paginate
        : {
            itemsPerPage: itemsPerPage,
            currentPage: currentPage(),
            id: 'publicaciones-main'
          }
  "
>
</app-publicacion-list>

<!-- Paginador -->
<div class="mt-8 flex justify-center">
  <pagination-controls
    id="publicaciones-main"
    (pageChange)="cambioDePagina($event)"
    previousLabel="Anterior"
    nextLabel="Siguiente"
    [maxSize]="7"
    [autoHide]="true"
    [responsive]="true"
    [directionLinks]="true"
  >
  </pagination-controls>
</div>
}

<!-- Carrusel section -->
<section class="max-w-4xl mx-auto my-10">
  <h2 class="text-center text-4xl font-semibold text-gray-700">Finales Felices</h2>
  <p class="text-center text-xl py-6">
    Donde todo cobra sentido... <br />Estas mascotas lograron reencontrarse con sus familias gracias
    a Pet Finder.
  </p>
  <app-carrusel-publicaciones
    [publicaciones]="publicacionesReencontrados()"
  ></app-carrusel-publicaciones>
</section>
