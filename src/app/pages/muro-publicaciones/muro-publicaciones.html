<app-hero></app-hero>
<!-- Barra de Filtrado -->
<div class="card py-3 px-6 mb-8 flex justify-around items-center gap-2 max-w-4xl mx-auto">
  <div class="flex gap-4 align-center">
    <p class="pt-1.5 text-sm font-semibold">Tipo de Mascota:</p>
    <div class="buttons flex justify-between align-center gap-2">
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoMascota() === 'gato'
        }"
        (click)="toggleTipoMascota('gato')"
      >
        Gato
      </button>
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoMascota() === 'perro'
        }"
        (click)="toggleTipoMascota('perro')"
      >
        Perro
      </button>
    </div>
  </div>

  <div class="flex gap-4 align-center">
    <p class="pt-1.5 text-sm font-semibold">Estado:</p>
    <div class="buttons flex justify-between align-center gap-2">
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroEstadoMascota() === 'perdido'
        }"
        (click)="toggleEstadoMascota('perdido')"
      >
        Perdido
      </button>
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroEstadoMascota() === 'encontrado'
        }"
        (click)="toggleEstadoMascota('encontrado')"
      >
        Encontrado
      </button>
    </div>
  </div>

  <div class="w-0.5 h-6 bg-border"></div>

  <div class="flex gap-4 align-center">
    <p class="pt-1.5 text-sm font-semibold">Tipo de Vista:</p>
    <div class="buttons flex justify-between align-center gap-2">
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoVista() === 'grilla'
        }"
        (click)="toggleTipoVista('grilla')"
      >
        Grilla
      </button>
      <button
        class="filter"
        [ngClass]="{
          'filter-active': filtroTipoVista() === 'mapa'
        }"
        (click)="toggleTipoVista('mapa')"
      >
        Mapa
      </button>
    </div>
  </div>
</div>

@if(filtroTipoVista() === 'mapa'){
<div class="max-w-4xl mx-auto">
  <app-map [publicaciones]="publicacionesFiltradas()"></app-map>
</div>
}@else(){
<!-- El signo | es un pipe para transformar como se muestran los datos de la izquierda, en este caso para paginarlos. -->
<!-- De todas las publicaciones, lo pagino pasandole los valores que yo quiero al paginate (Paginate = transformador especifico de ngxPagination) y le pongo un id- -->

<app-publicacion-list
  [publicaciones]="
    publicacionesFiltradas()
      | paginate
        : {
            itemsPerPage: itemsPerPage,
            currentPage: currentPage(),
            id: 'publicaciones-main'
          }
  "
>
</app-publicacion-list>

<!-- Paginador -->
<div class="mt-8 flex justify-center">
  <pagination-controls
    id="publicaciones-main"
    (pageChange)="cambioDePagina($event)"
    previousLabel="Anterior"
    nextLabel="Siguiente"
    [maxSize]="7"
    [autoHide]="true"
    [responsive]="true"
    [directionLinks]="true"
  >
  </pagination-controls>
</div>
}

<!-- Carrusel section -->
<section class="max-w-4xl mx-auto my-10">
  <h2 class="text-center text-4xl  font-semibold text-gray-700">Finales Felices</h2>
  <p class="text-center text-xl py-6">
    Donde todo cobra sentido... <br>Estas mascotas lograron reencontrarse con sus familias gracias a Pet Finder.
  </p>
  <app-carrusel-publicaciones
    [publicaciones]="publicacionesReencontrados()"
  ></app-carrusel-publicaciones>
</section>
